<div class="container mt-3">

  <div class="row">
    <div class="col-sm-2">
      <select class="form-select form-select-sm" value="Goshwara" (change)="reportType($event)">
        <option value="Goshwara">Goshwara</option>
        <option value="Receipt">Receipt</option>
        <option value="Voucher">Voucher</option>
        <option value="Rukn">Enayat</option>
        <option value="Collected">Collected</option>
      </select>
    </div>

    <div class="col-sm-2">
      <select class="form-select form-select-sm" value="" (change)="getReportByFilter($event)">
        <option selected>Select Circle</option>
        @for(item of circleList; track item){
        <option value="{{item._id}}">{{item.name}}</option>
        }
      </select>
    </div>
    @if(type == 'Goshwara'){
    <div class="col-sm-2">
      <input type="text" id="daterange" class="form-control form-control-sm" />
    </div>
    }@else{
    @if(type == 'Rukn' || type == 'Collected'){
    <div class="col-sm-2">
      <select class="form-select form-select-sm" [(ngModel)]="selectIncome" (change)="changeYear($event, 'income')">
        <option value="">Select Income Head</option>
        @for(item of incomeList; track item){
        <option value="{{item._id}}">{{item.name}}</option>
        }
      </select>
    </div>
    }
    <div class="col-sm-2">
      <select class="form-select form-select-sm" [(ngModel)]="selectYear" (change)="changeYear($event, 'year')">
        @for(item of yearCalender; track item){
        <option value="{{item}}">{{item}}</option>
        }
      </select>
    </div>
    }
    <div class="col-sm-2">
      <button class="btn btn-sm btn-dark" (click)="downloadPDF()">Download report</button>
    </div>
  </div>


  <div #pdfTable id="pdfTable" class="mt-5">
    @if(type == 'Goshwara'){
      <div class="row text-center">
        <div class="col-sm-8"><h4>JAMAAT-E-ISLAMI HIND,</h4></div>
        <div class="col-sm-4"><h4>{{placeName}}</h4></div>
      </div>
      <div class="row text-center">
        <div class="col-sm-8"><h5>GOSWHARA FOR THE MONTH/PERIOD :</h5></div>
        <div class="col-sm-4"><h5>{{showStartDate}} To {{showEndDate}}</h5></div>
      </div>
    <table class="table table-bordered mt-3">
      <thead>
        <tr>
          <th>Receipt by Name</th>
          <th>Collection</th>
          <th>Unit/Circle</th>
          <th>CityDiv</th>
          <th>Halqua</th>
          <th>PAYMENT BY NAME</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        @for(item of reportData; track item; let i = $index){
        <tr>
          <td>{{item.receiptName}}</td>
          <td>{{item.collection}}</td>
          <td>{{item.unitShare}}</td>
          <td>{{item.cityShare}}</td>
          <td>{{item.halquaShare}}</td>
          <td>{{item.voucherName}}</td>
          <td>{{item.totalCollection}}</td>
        </tr>
        }
      </tbody>
      <tbody>
        <tr>
          <th>(A) TOTAL INCOME</th>
          <th>{{total?.collection}}</th>
          <th>{{total?.unitShare}}</th>
          <th>{{total?.cityShare}}</th>
          <th>{{total?.halquaShare}}</th>
          <th>(A) TOTAL PAYMENTS</th>
          <th>{{total?.totalCollection}}</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <th class="text-center" colspan="2">OPENING BALANCE (BANK & CASH)</th>
          <td colspan="3"></td>
          <th class="text-center" colspan="2">CLOSING BALANCE (BANK & CASH)</th>
        </tr>
        <tr>
          <td>Bank</td>
          <td>{{receiptTotal?.bankAmount || 0}}</td>
          <td colspan="3"></td>
          <td>Bank</td>
          <td>{{vocherTotal?.bankAmount || 0}}</td>
        </tr>
        <tr>
          <td>Cash</td>
          <td>{{receiptTotal?.cashAmount || 0}}</td>
          <td colspan="3"></td>
          <td>Cash</td>
          <td>{{vocherTotal?.cashAmount || 0}}</td>
        </tr>
        <tr>
          <th>(B) TOTAL RS.</th>
          <th>{{receiptTotal?.totalAmount || 0}}</th>
          <th colspan="3"></th>
          <th>(B) TOTAL RS.</th>
          <th>{{vocherTotal?.totalAmount || 0}}</th>
        </tr>
        <tr>
          <th>GRAND TOTAL (A+B)</th>
          <th>{{receiptTotal?.totalAmount + total?.collection}}</th>
          <th colspan="3"></th>
          <th>GRAND TOTAL (A+B)</th>
          <th>{{vocherTotal?.totalAmount + total?.totalCollection}}</th>
        </tr>

      </tbody>
    </table>
    <label>PLACE :- {{unitName}}</label><br>
    <label>Date :- {{currentDate}}</label>

    <div class="row mt-5">
      <div class="col-sm-3"><label>Accountant</label></div>
      <div class="col-sm-3"><label>Cashier</label></div>
      <div class="col-sm-3"><label>AMEER MUQAMI</label></div>
      <div class="col-sm-3"><label>Auditor JIH, {{halquaName}}</label></div>
    </div>
    }
    @if(type == 'Receipt' || type == 'Voucher' || type == 'Rukn' || type == 'Collected'){
    <table class="table table-bordered mt-3">
      <thead>
        <tr>
          @for(item of tableHeader; track item){
          <th>{{item}}</th>
          }
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        @for(item of tableBody; track item){
        <tr>
          <td>{{item?.name}}</td>
          <td>{{item?.Apr}}</td>
          <td>{{item?.May}}</td>
          <td>{{item?.Jun}}</td>
          <td>{{item?.Jul}}</td>
          <td>{{item?.Aug}}</td>
          <td>{{item?.Sep}}</td>
          <td>{{item?.Oct}}</td>
          <td>{{item?.Nov}}</td>
          <td>{{item?.Dec}}</td>
          <td>{{item?.Jan}}</td>
          <td>{{item?.Feb}}</td>
          <td>{{item?.Mar}}</td>
          <td>{{item?.Total}}</td>
        </tr>
        }
      </tbody>
      <tfoot>
        <tr>
          <th>Total</th>
          <th>{{sumObj?.Apr}}</th>
          <th>{{sumObj?.May}}</th>
          <th>{{sumObj?.Jun}}</th>
          <th>{{sumObj?.Jul}}</th>
          <th>{{sumObj?.Aug}}</th>
          <th>{{sumObj?.Sep}}</th>
          <th>{{sumObj?.Oct}}</th>
          <th>{{sumObj?.Nov}}</th>
          <th>{{sumObj?.Dec}}</th>
          <th>{{sumObj?.Jan}}</th>
          <th>{{sumObj?.Feb}}</th>
          <th>{{sumObj?.Mar}}</th>
          <th>{{sumObj?.Total}}</th>

        </tr>
      </tfoot>
    </table>
    }
  </div>
</div>